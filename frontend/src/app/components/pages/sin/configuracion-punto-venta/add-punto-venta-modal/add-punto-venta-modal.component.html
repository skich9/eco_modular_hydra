<div class="modal fade" id="addPuntoVentaModal" tabindex="-1" aria-labelledby="addPuntoVentaModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="addPuntoVentaModalLabel">Anadir Punto de Venta</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="closeModal()"></button>
			</div>
			<div class="modal-body">
				<form [formGroup]="form" (ngSubmit)="onSubmit()">
					<div class="row g-3">
						<!-- Sucursal -->
						<div class="col-md-6">
							<label class="form-label">Sucursal <span class="text-danger">*</span></label>
							<select class="form-select" formControlName="sucursal" [class.is-invalid]="form.get('sucursal')?.invalid && form.get('sucursal')?.touched">
								<option value="">-- Seleccione --</option>
								<option *ngFor="let s of sucursales" [value]="s.codigo">{{ s.codigo }} - {{ s.nombre }}</option>
							</select>
							<div class="invalid-feedback">Seleccione una sucursal</div>
						</div>

						<!-- Tipo Punto de Venta -->
						<div class="col-md-6">
							<label class="form-label">Tipo Punto de Venta <span class="text-danger">*</span></label>
							<select class="form-select" formControlName="tipo_punto_venta" [class.is-invalid]="form.get('tipo_punto_venta')?.invalid && form.get('tipo_punto_venta')?.touched">
								<option value="">-- Seleccione --</option>
								<option *ngFor="let t of tiposPuntoVenta" [value]="t.id">{{ t.nombre }}</option>
							</select>
							<div class="invalid-feedback">Seleccione un tipo de punto de venta</div>
						</div>

						<!-- CUIS Creacion -->
						<div class="col-md-6">
							<label class="form-label">CUIS Creacion <span class="text-danger">*</span></label>
							<input type="text" class="form-control" formControlName="cuis_creacion" placeholder="Ingrese codigo CUIS" [class.is-invalid]="form.get('cuis_creacion')?.invalid && form.get('cuis_creacion')?.touched" />
							<div class="invalid-feedback">Ingrese el codigo CUIS</div>
						</div>

						<!-- Nombre Punto de Venta -->
						<div class="col-md-6">
							<label class="form-label">Nombre Punto de Venta <span class="text-danger">*</span></label>
							<input type="text" class="form-control" formControlName="nombre_punto_venta" placeholder="Ingrese nombre" maxlength="100" [class.is-invalid]="form.get('nombre_punto_venta')?.invalid && form.get('nombre_punto_venta')?.touched" />
							<div class="invalid-feedback">Ingrese el nombre del punto de venta</div>
						</div>

						<!-- Descripcion -->
						<div class="col-12">
							<label class="form-label">Descripcion</label>
							<textarea class="form-control" formControlName="descripcion" rows="2" placeholder="Ingrese una descripcion (opcional)" maxlength="255"></textarea>
						</div>

						<!-- Usuario -->
						<div class="col-md-6">
							<label class="form-label">Usuario <span class="text-danger">*</span></label>
							<select class="form-select" formControlName="usuario" [class.is-invalid]="form.get('usuario')?.invalid && form.get('usuario')?.touched">
								<option value="">-- Seleccione --</option>
								<option *ngFor="let u of usuarios" [value]="u.id">{{ u.nombre }}</option>
							</select>
							<div class="invalid-feedback">Seleccione un usuario</div>
						</div>

						<!-- Fecha Finalizacion -->
						<div class="col-md-6">
							<label class="form-label">Fecha Finalizacion</label>
							<input type="date" class="form-control" formControlName="fecha_finalizacion" />
							<small class="text-muted">Opcional - Fecha de cierre del punto de venta</small>
						</div>
					</div>

					<!-- Error message -->
					<div *ngIf="submitError" class="alert alert-danger mt-3 mb-0">
						{{ submitError }}
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeModal()">Cancelar</button>
				<button type="button" class="btn btn-primary" (click)="onSubmit()">
					<i class="fas fa-save me-1"></i>
					Guardar
				</button>
			</div>
		</div>
	</div>
</div>
